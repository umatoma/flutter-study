---
title: 'Cloud Firestoreã‚’ä½¿ã£ã¦ã¿ã‚‹'
description: 'Cloud Firestoreã‚’ä½¿ã£ãŸãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ãƒ»å–å¾—ãƒ»æ›´æ–°ãƒ»å‰Šé™¤ã®å®Ÿè£…ã‚’ç´¹ä»‹'
---

## ã“ã®ãƒšãƒ¼ã‚¸ã®ã‚´ãƒ¼ãƒ«

- Cloud Firestoreã§ã®ä½œæˆãƒ»å–å¾—ãƒ»æ›´æ–°ãƒ»å‰Šé™¤æ–¹æ³•ã‚’çŸ¥ã‚‹
- Flutterã‹ã‚‰Cloud Firestoreã‚’æ“ä½œã™ã‚‹æ–¹æ³•ã‚’çŸ¥ã‚‹


## Flutterãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆãƒ»è¨­å®š

ç„¡äº‹ã€Cloud Firestoreã‚’ä½¿ã†ãŸã‚ã®æº–å‚™ã¯ã§ããŸã§ã—ã‚‡ã†ã‹ï¼Ÿ  
æ¬¡ã¯ã€Flutterå´ã®æº–å‚™ã‚‚é€²ã‚ã¦ã„ãã¾ã—ã‚‡ã†ã€‚


### Flutterãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

[ã‚¢ãƒ—ãƒªèµ·å‹•ã®ãƒšãƒ¼ã‚¸](/getting-started/run-app)ã§ç´¹ä»‹ã—ãŸã®ã¨åŒã˜æ§˜ã«ã€  
Flutterã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—é–‹ç™ºã§ãã‚‹çŠ¶æ…‹ã«ã—ã¾ã—ã‚‡ã†ã€‚

```bash
$ flutter create myapp
```


### Webã‚¢ãƒ—ãƒªç”¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

ã“ã“ã§ã¯Webã‚¢ãƒ—ãƒªç”¨ã«Firebaseã¨é€£æºã™ã‚‹ãŸã‚ã®è¨­å®šã‚’è¡Œã„ã¾ã—ã‚‡ã†ã€‚

â€» ã“ã“ã§ã¯è¨­å®šãŒç°¡å˜ãªWebã‚¢ãƒ—ãƒªã§é–‹ç™ºã‚’é€²ã‚ã¦ã„ãã¾ã™ã€‚  
â€» iOS/Androidã§åˆ©ç”¨ã—ãŸã„å ´åˆã¯ã€[ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®èª¬æ˜](https://pub.dev/packages/firebase_auth)ã‚’å…ƒã«åˆ¥é€”è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚


<table>
    <tbody>
        <tr>
            <td>Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰Webã‚¢ãƒ—ãƒªã‚’è¿½åŠ </td>
            <td width="50%"><img src="../images/firebase/authentication-web-setup-1.png" /></td>
        </tr>
        <tr>
            <td>ã‚¢ãƒ—ãƒªã‚’ç™»éŒ²</td>
            <td width="50%"><img src="../images/firebase/authentication-web-setup-2.png" /></td>
        </tr>
        <tr>
            <td>
                â—ï¸ æ³¨æ„ â—ï¸<br/>
                Firestoreç”¨ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚‚è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br/>
                ç”»åƒã‚’å‚è€ƒã«ã€web/index.html ã«è¨­å®šã‚’è¿½è¨˜ã—ã¾ã™ã€‚
            </td>
            <td width="50%">
                <img src="../images/firebase/authentication-web-setup-3.png" /><br/>
                <img src="../images/firebase/cloud-firestore-web-setup-3-2.png" />
            </td>
        </tr>
        <tr>
            <td>æº–å‚™OK ğŸ‰ğŸ‰ğŸ‰</td>
            <td width="50%"><img src="../images/firebase/authentication-web-setup-4.png" /></td>
        </tr>
    </tbody>
</table>


## Firestoreã‚’ä½¿ã£ãŸå‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã¿ã‚‹

Cloud Firestoreã‚’ä½¿ã£ãŸå‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚


### â—ï¸ æ³¨æ„äº‹é … â—ï¸  
Webã‚¢ãƒ—ãƒªå‘ã‘ã®è¨­å®šã‚’è¡Œã£ãŸã®ã§ã€  
èµ·å‹•ã™ã‚‹ãƒ‡ãƒã‚¤ã‚¹ã¯ `Chrome` ã‚’é¸æŠã—ã¦ä¸‹ã•ã„ã€‚


### Firestoreç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Flutterã‹ã‚‰Cloud Firestoreã‚’ä½¿ã†ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæä¾›ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€  
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ã‚‡ã†ã€‚

- https://pub.dev/packages/cloud_firestore

ä½œæˆã—ãŸFlutterãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® `pubspec.yaml` ã‚’é–‹ãã€  
`dependencies` ã«ä½¿ç”¨ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¿½è¨˜ã—ã¾ã™ã€‚

```yaml
# --- çœç•¥ ---

dependencies:
  flutter:
    sdk: flutter


  # The following adds the Cupertino Icons font to your application.
  # Use with the CupertinoIcons class for iOS style icons.
  cupertino_icons: ^0.1.3

  # *** ã“ã“ã‚’è¿½è¨˜ ***
  cloud_firestore: ^0.13.5

dev_dependencies:
  flutter_test:
    sdk: flutter

# --- çœç•¥ ---
```

VSCodeã®Flutterãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯ã€  
ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã™ã‚Œã° `pubspec.yaml` ã‚’å…ƒã«è‡ªå‹•çš„ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã‚Œã‚‹ã¯ãšã§ã™ã€‚

ã‚‚ã—ã€ä¸Šæ‰‹ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã‚Œãªã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚

```bash
$ flutter pub get
```


### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆ

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹å‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚  
`lib/main.dart` ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¾ã—ã‚‡ã†ã€‚

è§£èª¬

- `setData()` ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆã§ãã‚‹
- ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯è‡ªå‹•çš„ã«ä½œæˆã•ã‚Œã‚‹
- ä½œæˆã•ã‚ŒãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯Firestoreã®ç®¡ç†ç”»é¢ã§ç¢ºèªã§ãã‚‹

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

![](../images/firebase/cloud-firestore-create-document.png)

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

```dart
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      title: 'Flutter Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
        visualDensity: VisualDensity.adaptivePlatformDensity,
      ),
      home: MyFirestorePage(),
    );
  }
}

class MyFirestorePage extends StatefulWidget {
  @override
  _MyFirestorePageState createState() => _MyFirestorePageState();
}

class _MyFirestorePageState extends State<MyFirestorePage> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Center(
        child: Column(
          children: <Widget>[
            RaisedButton(
              child: Text('ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ'),
              onPressed: () async {
                // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
                await Firestore.instance
                    .collection('users') // ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ID
                    .document('id_abc') // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID
                    .setData({'name': 'éˆ´æœ¨', 'age': 40}); // ãƒ‡ãƒ¼ã‚¿
              },
            ),
          ],
        ),
      ),
    );
  }
}
```

### ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆ

æ¬¡ã¯ã€ä½œæˆã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç´ä»˜ã„ãŸ  
ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

`lib/main.dart` ã® `_MyFirestorePageState` ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¾ã—ã‚‡ã†ã€‚

è§£èª¬

- ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹æ™‚ã¯ç´ä»˜ã‘ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®IDã‚‚æŒ‡å®šã™ã‚‹
- ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯è‡ªå‹•çš„ã«ä½œæˆã•ã‚Œã‚‹
- ä½œæˆã•ã‚ŒãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯Firestoreã®ç®¡ç†ç”»é¢ã§ç¢ºèªã§ãã‚‹

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

![](../images/firebase/cloud-firestore-create-subcollection.png)

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

```dart
class _MyFirestorePageState extends State<MyFirestorePage> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Center(
        child: Column(
          children: <Widget>[
            RaisedButton( /* --- çœç•¥ --- */ ),
            RaisedButton(
              child: Text('ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ'),
              onPressed: () async {
                // ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å†…ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
                await Firestore.instance
                    .collection('users') // ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ID
                    .document('id_abc') // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID << usersã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å†…ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
                    .collection('orders') // ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ID
                    .document('id_123') // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID << ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å†…ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
                    .setData({'price': 600, 'date': '9/13'}); // ãƒ‡ãƒ¼ã‚¿
              },
            ),
          ],
        ),
      ),
    );
  }
}
```


### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§ã‚’å–å¾—

æ¬¡ã¯ã€ä½œæˆã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æƒ…å ±ã‚’å–å¾—ã—ã€  
`users` ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å†…ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§ã‚’è¡¨ç¤ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

`lib/main.dart` ã® `_MyFirestorePageState` ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¾ã—ã‚‡ã†ã€‚

è§£èª¬

- `getDocuments()` ã§ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å†…ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§ã‚’å–å¾—ã§ãã‚‹

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

```dart
class _MyFirestorePageState extends State<MyFirestorePage> {

  // ä½œæˆã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§
  List<DocumentSnapshot> documentList = [];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Center(
        child: Column(
          children: <Widget>[
            RaisedButton( /* --- çœç•¥ --- */ ),
            RaisedButton( /* --- çœç•¥ --- */ ),
            RaisedButton(
              child: Text('ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§å–å¾—'),
              onPressed: () async {
                // ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å†…ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§ã‚’å–å¾—
                final snapshot =
                    await Firestore.instance.collection('users').getDocuments();
                // å–å¾—ã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§ã‚’UIã«åæ˜ 
                setState(() {
                  documentList = snapshot.documents;
                });
              },
            ),
            // ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å†…ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§ã‚’è¡¨ç¤º
            Column(
              children: documentList.map((document) {
                return ListTile(
                  title: Text('${document['name']}ã•ã‚“'),
                  subtitle: Text('${document['age']}æ­³'),
                );
              }).toList(),
            ),
          ],
        ),
      ),
    );
  }
}
```


### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æŒ‡å®šã—ã¦å–å¾—

ä¸€è¦§ã§ã¯ãªãã€1ã¤ã ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å–å¾—ã—ãŸã„å ´åˆã‚‚ã‚ã‚Šã¾ã™ã‚ˆã­ã€‚  
ä½œæˆã—ãŸã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å†…ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ `id_123` ã‚’æŒ‡å®šã—ã¦è¡¨ç¤ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

`lib/main.dart` ã® `_MyFirestorePageState` ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¾ã—ã‚‡ã†ã€‚

è§£èª¬

- ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³IDãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆIDã‚’æŒ‡å®šã— `get` ã§ç‰¹å®šã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å–å¾—ã§ãã‚‹

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

```dart
class _MyFirestorePageState extends State<MyFirestorePage> {
  // ä½œæˆã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§
  List<DocumentSnapshot> documentList = [];

  // æŒ‡å®šã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æƒ…å ±
  String orderDocumentInfo = '';

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Center(
        child: Column(
          children: <Widget>[
            RaisedButton( /* --- çœç•¥ --- */ ),
            RaisedButton( /* --- çœç•¥ --- */ ),
            RaisedButton( /* --- çœç•¥ --- */ ),
            Column( /* --- çœç•¥ --- */ ),
            RaisedButton(
              child: Text('ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æŒ‡å®šã—ã¦å–å¾—'),
              onPressed: () async {
                // ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³IDã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆIDã‚’æŒ‡å®šã—ã¦å–å¾—
                final document = await Firestore.instance
                    .collection('users')
                    .document('id_abc')
                    .collection('orders')
                    .document('id_123')
                    .get();
                // å–å¾—ã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æƒ…å ±ã‚’UIã«åæ˜ 
                setState(() {
                  orderDocumentInfo =
                      '${document['date']} ${document['price']}å††';
                });
              },
            ),
            // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æƒ…å ±ã‚’è¡¨ç¤º
            ListTile(title: Text(orderDocumentInfo)),
          ],
        ),
      ),
    );
  }
}
```


### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°

æ¬¡ã¯ã€ä½œæˆã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æƒ…å ±ã‚’æ›´æ–°ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚  
ã“ã“ã§ã¯ã€éˆ´æœ¨ã•ã‚“ã®å¹´é½¢ `age` ã‚’ `40` ã‹ã‚‰ `41` ã«å¤‰ãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚

`lib/main.dart` ã® `MyFirestorePage` ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¾ã—ã‚‡ã†ã€‚

è§£èª¬

- `updateData()` ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã§ãã‚‹
- ç®¡ç†ç”»é¢ã‚’ç¢ºèªã—ãŸã‚Šã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§ã‚’å†å–å¾—ã™ã‚‹ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

![](../images/firebase/cloud-firestore-update-document.png)

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

```dart
class _MyFirestorePageState extends State<MyFirestorePage> {
  /* --- çœç•¥ --- */
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Center(
        child: Column(
          children: <Widget>[
            RaisedButton( /* --- çœç•¥ --- */ ),
            RaisedButton( /* --- çœç•¥ --- */ ),
            RaisedButton( /* --- çœç•¥ --- */ ),
            Column( /* --- çœç•¥ --- */ ),
            RaisedButton( /* --- çœç•¥ --- */ ),
            ListTile( /* --- çœç•¥ --- */ ),
            RaisedButton(
              child: Text('ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°'),
              onPressed: () async {
                // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
                await Firestore.instance
                    .collection('users')
                    .document('id_abc')
                    .updateData({'age': 41});
              },
            ),
          ],
        ),
      ),
    );
  }
}
```


### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤

æœ€å¾Œã«ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å‰Šé™¤ã‚’è¡Œã„ã¾ã™ã€‚  
ã“ã“ã§ã¯ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ `id_123` ã‚’å‰Šé™¤ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

è§£èª¬

- `delete()` ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤ã§ãã‚‹
- ç®¡ç†ç”»é¢ã‚’ç¢ºèªã™ã‚‹ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

![](../images/firebase/cloud-firestore-update-document.png)

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

```dart
class _MyFirestorePageState extends State<MyFirestorePage> {
  /* --- çœç•¥ --- */
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Center(
        child: Column(
          children: <Widget>[
            RaisedButton( /* --- çœç•¥ --- */ ),
            RaisedButton( /* --- çœç•¥ --- */ ),
            RaisedButton( /* --- çœç•¥ --- */ ),
            Column( /* --- çœç•¥ --- */ ),
            RaisedButton( /* --- çœç•¥ --- */ ),
            ListTile( /* --- çœç•¥ --- */ ),
            RaisedButton( /* --- çœç•¥ --- */ ),
            RaisedButton(
              child: Text('ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‰Šé™¤'),
              onPressed: () async {
                // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‰Šé™¤
                await Firestore.instance
                    .collection('users')
                    .document('id_abc')
                    .collection('orders')
                    .document('id_123')
                    .delete();
              },
            ),
          ],
        ),
      ),
    );
  }
}
```


## ã¾ã¨ã‚

- ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã„Firestoreã‚’ä½¿ã£ãŸæ©Ÿèƒ½ã‚’ç°¡å˜ã«å®Ÿè£…ã§ãã‚‹

ãŠç–²ã‚Œã•ã¾ã§ã—ãŸ ğŸ‘  
Authenticationã«ç¶šãCloud Firestoreã®æ‰±ã„æ–¹ã‚‚å­¦ã³ã¾ã—ãŸã­ã€‚

æ¬¡å›ã‹ã‚‰ã¯Firebaseã‚’ä½¿ã£ãŸ  
å°‘ã—è¤‡é›‘ãªã‚¢ãƒ—ãƒªé–‹ç™ºã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã¾ã—ã‚‡ã† ğŸ’ªğŸ’ªğŸ’ª

## å‚è€ƒæƒ…å ±

- https://pub.dev/packages/cloud_firestore
